<!DOCTYPE html>
<html>
  <head>
    <style>
      window, html, body {
        border: 0;
        margin: 0;
        padding: 0;
      }
      body {
        overflow: scroll;
      }
      #minimap-container {
        position: fixed;
        top: 5vmin;
        right: 5vmin;

        outline: 2px solid black;
      }
      #minimap {
        max-width: 30vmin;
        max-height: 30vmin;

        display: block;

        pointer-events: none;
      }
      #minimap-view {
        position: absolute;
        box-sizing: border-box;
        left: 0%;
        top: 50%;

        pointer-events: none;

        outline: 2px solid black;
      }
      #map {
        transform-origin: top left;
      }
      #container {
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>
    <div id="minimap-container">
      <img id="minimap"></img>
      <div id="minimap-view"></div>
    </div>
    <script type="text/javascript">
      const container = document.getElementById('container');
      const minimap = document.getElementById('minimap');
      const minimapView = document.getElementById('minimap-view');
      const minimapContainer = document.getElementById('minimap-container');

      const data = new TextDecoder().decode(Uint8Array.from(atob("PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8IS0tIEdlbmVyYXRlZCBieSBncmFwaHZpeiB2ZXJzaW9uIDkuMC4wICgwKQogLS0+CjwhLS0gUGFnZXM6IDEgLS0+Cjxzdmcgd2lkdGg9IjMxOTNwdCIgaGVpZ2h0PSI4NjJwdCIKIHZpZXdCb3g9IjAuMDAgMC4wMCAzMTkzLjEyIDg2MS41MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CjxnIGlkPSJncmFwaDAiIGNsYXNzPSJncmFwaCIgdHJhbnNmb3JtPSJzY2FsZSgxIDEpIHJvdGF0ZSgwKSB0cmFuc2xhdGUoNCA4NTcuNSkiPgo8cG9seWdvbiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSJub25lIiBwb2ludHM9Ii00LDQgLTQsLTg1Ny41IDMxODkuMTIsLTg1Ny41IDMxODkuMTIsNCAtNCw0Ii8+CjwhLS0gRU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX0MgLS0+CjxnIGlkPSJub2RlMSIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+RU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX0M8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSIjODhmZjg4IiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjAsLTY2OS41IDAsLTg1MyA3NTAuMjUsLTg1MyA3NTAuMjUsLTY2OS41IDAsLTY2OS41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iOCIgeT0iLTgzNS43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5DbGFzc0V4cG9ydDogRU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX0M8L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iOCIgeT0iLTgxNi4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7CoMKgU3VwZXJTdHJ1Y3Q6IGltcG9ydCAvR2FtZS9Dcml0dGVycy9KZWxseVBsYXRmb3JtL0VORV9KZWxseV9QYXNzaXZlJiM0NTsmZ3Q7RU5FX0plbGx5X1Bhc3NpdmVfQzwvdGV4dD4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI4IiB5PSItNzk2LjciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPsKgwqBQcm9wZXJ0aWVzOjwvdGV4dD4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI4IiB5PSItNzc3LjIiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPsKgwqDCoMKgU3RydWN0UHJvcGVydHkgVWJlckdyYXBoRnJhbWU8L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iOCIgeT0iLTc1Ny43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7CoMKgwqDCoMKgwqBDUEZfVHJhbnNpZW50fENQRl9EdXBsaWNhdGVUcmFuc2llbnQ8L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iOCIgeT0iLTczOC4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7CoMKgwqDCoE9iamVjdFByb3BlcnR5IFBhcnRpY2xlU3lzdGVtPC90ZXh0Pgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjgiIHk9Ii03MTguNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+wqDCoMKgwqDCoMKgQ1BGX0JsdWVwcmludFZpc2libGV8Q1BGX0luc3RhbmNlZFJlZmVyZW5jZXxDUEZfTm9uVHJhbnNhY3Rpb25hbDwvdGV4dD4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI4IiB5PSItNjk5LjIiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPsKgwqDCoMKgT2JqZWN0UHJvcGVydHkgQm94MTwvdGV4dD4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI4IiB5PSItNjc5LjciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPsKgwqDCoMKgwqDCoENQRl9CbHVlcHJpbnRWaXNpYmxlfENQRl9JbnN0YW5jZWRSZWZlcmVuY2V8Q1BGX05vblRyYW5zYWN0aW9uYWw8L3RleHQ+CjwvZz4KPCEtLSBFeGVjdXRlVWJlcmdyYXBoX0VORV9KZWxseV9QYXNzaXZlX01vdGhlciAtLT4KPGcgaWQ9Im5vZGUyIiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT5FeGVjdXRlVWJlcmdyYXBoX0VORV9KZWxseV9QYXNzaXZlX01vdGhlcjwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IiNmZjg4ODgiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNzY4LjI1LC03MjggNzY4LjI1LC03OTQuNSAxMjM4LC03OTQuNSAxMjM4LC03MjggNzY4LjI1LC03MjgiLz4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI3NzYuMjUiIHk9Ii03NzcuMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RnVuY3Rpb24gRXhlY3V0ZVViZXJncmFwaF9FTkVfSmVsbHlfUGFzc2l2ZV9Nb3RoZXI8L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iNzc2LjI1IiB5PSItNzU3LjciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPsKgwqBJbnRQcm9wZXJ0eSBFbnRyeVBvaW50PC90ZXh0Pgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9Ijc3Ni4yNSIgeT0iLTczOC4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7CoMKgwqDCoENQRl9CbHVlcHJpbnRWaXNpYmxlfENQRl9CbHVlcHJpbnRSZWFkT25seXxDUEZfUGFybTwvdGV4dD4KPC9nPgo8IS0tIEV4ZWN1dGVVYmVyZ3JhcGhfRU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX18wIC0tPgo8ZyBpZD0ibm9kZTMiIGNsYXNzPSJub2RlIj4KPHRpdGxlPkV4ZWN1dGVVYmVyZ3JhcGhfRU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX18wPC90aXRsZT4KPHBvbHlnb24gZmlsbD0iI2VlZWVlZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI3MDIuMjUsLTU1OCA3MDIuMjUsLTYzMi41IDEzMDQsLTYzMi41IDEzMDQsLTU1OCA3MDIuMjUsLTU1OCIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxMDAzLjEyIiB5PSItNjE1LjIiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkVORV9KZWxseV9QYXNzaXZlX01vdGhlcl9DOjpFeGVjdXRlVWJlcmdyYXBoX0VORV9KZWxseV9QYXNzaXZlX01vdGhlcjowPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI3MDIuMjUsLTYwNSAxMzA0LC02MDUiLz4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI3MTAuMjUiIHk9Ii01ODcuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfQ29tcHV0ZWRKdW1wPC90ZXh0Pgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjcxMC4yNSIgeT0iLTU2OC4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7CoMKgRVhfTG9jYWxWYXJpYWJsZSBbRW50cnlQb2ludF08L3RleHQ+CjwvZz4KPCEtLSBFeGVjdXRlVWJlcmdyYXBoX0VORV9KZWxseV9QYXNzaXZlX01vdGhlciYjNDU7Jmd0O0V4ZWN1dGVVYmVyZ3JhcGhfRU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX18wIC0tPgo8ZyBpZD0iZWRnZTEiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPkV4ZWN1dGVVYmVyZ3JhcGhfRU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyJiM0NTsmZ3Q7RXhlY3V0ZVViZXJncmFwaF9FTkVfSmVsbHlfUGFzc2l2ZV9Nb3RoZXJfXzA8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMTAwMy4xMiwtNzI3Ljg1QzEwMDMuMTIsLTcwNC4wMiAxMDAzLjEyLC02NzEuMjUgMTAwMy4xMiwtNjQ0LjM3Ii8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEwMDYuNjMsLTY0NC4zOCAxMDAzLjEzLC02MzQuMzggOTk5LjYzLC02NDQuMzggMTAwNi42MywtNjQ0LjM4Ii8+CjwvZz4KPCEtLSBFeGVjdXRlVWJlcmdyYXBoX0VORV9KZWxseV9QYXNzaXZlX01vdGhlcl9fMTAgLS0+CjxnIGlkPSJub2RlNCIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+RXhlY3V0ZVViZXJncmFwaF9FTkVfSmVsbHlfUGFzc2l2ZV9Nb3RoZXJfXzEwPC90aXRsZT4KPHBvbHlnb24gZmlsbD0iI2VlZWVlZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxOTQ3LjEyLC0yMDQgMTk0Ny4xMiwtMzE3LjUgMjU1Ny4xMiwtMzE3LjUgMjU1Ny4xMiwtMjA0IDE5NDcuMTIsLTIwNCIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyMjUyLjEyIiB5PSItMzAwLjIiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkVORV9KZWxseV9QYXNzaXZlX01vdGhlcl9DOjpFeGVjdXRlVWJlcmdyYXBoX0VORV9KZWxseV9QYXNzaXZlX01vdGhlcjoxMDwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTk0Ny4xMiwtMjkwIDI1NTcuMTIsLTI5MCIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjE5NTUuMTIiIHk9Ii0yNzIuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfQ29udGV4dDwvdGV4dD4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxOTU1LjEyIiB5PSItMjUzLjIiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPsKgwqBFWF9JbnN0YW5jZVZhcmlhYmxlIFtQYXJ0aWNsZVN5c3RlbV08L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTk1NS4xMiIgeT0iLTIzMy43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7CoMKgRVhfVmlydHVhbEZ1bmN0aW9uIERlYWN0aXZhdGU8L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTk1NS4xMiIgeT0iLTIxNC4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7CoMKgUlZhbHVlID0gW108L3RleHQ+CjwvZz4KPCEtLSBFeGVjdXRlVWJlcmdyYXBoX0VORV9KZWxseV9QYXNzaXZlX01vdGhlcl9fNDYgLS0+CjxnIGlkPSJub2RlNSIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+RXhlY3V0ZVViZXJncmFwaF9FTkVfSmVsbHlfUGFzc2l2ZV9Nb3RoZXJfXzQ2PC90aXRsZT4KPHBvbHlnb24gZmlsbD0iI2VlZWVlZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxOTQ3LjEyLC0xMTIgMTk0Ny4xMiwtMTY3IDI1NTcuMTIsLTE2NyAyNTU3LjEyLC0xMTIgMTk0Ny4xMiwtMTEyIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjIyNTIuMTIiIHk9Ii0xNDkuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX0M6OkV4ZWN1dGVVYmVyZ3JhcGhfRU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyOjQ2PC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxOTQ3LjEyLC0xMzkuNSAyNTU3LjEyLC0xMzkuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjE5NTUuMTIiIHk9Ii0xMjIuMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfSnVtcCA2NjwvdGV4dD4KPC9nPgo8IS0tIEV4ZWN1dGVVYmVyZ3JhcGhfRU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX18xMCYjNDU7Jmd0O0V4ZWN1dGVVYmVyZ3JhcGhfRU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX180NiAtLT4KPGcgaWQ9ImVkZ2UyIiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5FeGVjdXRlVWJlcmdyYXBoX0VORV9KZWxseV9QYXNzaXZlX01vdGhlcl9fMTAmIzQ1OyZndDtFeGVjdXRlVWJlcmdyYXBoX0VORV9KZWxseV9QYXNzaXZlX01vdGhlcl9fNDY8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMjI1Mi4xMiwtMjAzLjYyQzIyNTIuMTIsLTE5NS4xOSAyMjUyLjEyLC0xODYuNjcgMjI1Mi4xMiwtMTc4Ljc0Ii8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjIyNTUuNjMsLTE3OC43NSAyMjUyLjEzLC0xNjguNzUgMjI0OC42MywtMTc4Ljc1IDIyNTUuNjMsLTE3OC43NSIvPgo8L2c+CjwhLS0gRXhlY3V0ZVViZXJncmFwaF9FTkVfSmVsbHlfUGFzc2l2ZV9Nb3RoZXJfXzY2IC0tPgo8ZyBpZD0ibm9kZTgiIGNsYXNzPSJub2RlIj4KPHRpdGxlPkV4ZWN1dGVVYmVyZ3JhcGhfRU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX182NjwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IiNlZWVlZWUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTk0Ny4xMiwtMC41IDE5NDcuMTIsLTc1IDI1NTcuMTIsLTc1IDI1NTcuMTIsLTAuNSAxOTQ3LjEyLC0wLjUiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjI1Mi4xMiIgeT0iLTU3LjciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkVORV9KZWxseV9QYXNzaXZlX01vdGhlcl9DOjpFeGVjdXRlVWJlcmdyYXBoX0VORV9KZWxseV9QYXNzaXZlX01vdGhlcjo2NjwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTk0Ny4xMiwtNDcuNSAyNTU3LjEyLC00Ny41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTk1NS4xMiIgeT0iLTMwLjIiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkVYX1JldHVybjwvdGV4dD4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxOTU1LjEyIiB5PSItMTAuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+wqDCoEVYX05vdGhpbmc8L3RleHQ+CjwvZz4KPCEtLSBFeGVjdXRlVWJlcmdyYXBoX0VORV9KZWxseV9QYXNzaXZlX01vdGhlcl9fNDYmIzQ1OyZndDtFeGVjdXRlVWJlcmdyYXBoX0VORV9KZWxseV9QYXNzaXZlX01vdGhlcl9fNjYgLS0+CjxnIGlkPSJlZGdlMyIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+RXhlY3V0ZVViZXJncmFwaF9FTkVfSmVsbHlfUGFzc2l2ZV9Nb3RoZXJfXzQ2JiM0NTsmZ3Q7RXhlY3V0ZVViZXJncmFwaF9FTkVfSmVsbHlfUGFzc2l2ZV9Nb3RoZXJfXzY2PC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTIyNTIuMTIsLTExMS41MUMyMjUyLjEyLC0xMDMuODEgMjI1Mi4xMiwtOTUuMTkgMjI1Mi4xMiwtODYuNjQiLz4KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMjI1NS42MywtODYuNjQgMjI1Mi4xMywtNzYuNjQgMjI0OC42MywtODYuNjQgMjI1NS42MywtODYuNjQiLz4KPC9nPgo8IS0tIEV4ZWN1dGVVYmVyZ3JhcGhfRU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX181MSAtLT4KPGcgaWQ9Im5vZGU2IiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT5FeGVjdXRlVWJlcmdyYXBoX0VORV9KZWxseV9QYXNzaXZlX01vdGhlcl9fNTE8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSIjZWVlZWVlIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjE4MTEsLTQ1Ni4yNSAxODExLC01MTEuMjUgMjY5My4yNSwtNTExLjI1IDI2OTMuMjUsLTQ1Ni4yNSAxODExLC00NTYuMjUiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjI1Mi4xMiIgeT0iLTQ5My45NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX0M6OkV4ZWN1dGVVYmVyZ3JhcGhfRU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyOjUxPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxODExLC00ODMuNzUgMjY5My4yNSwtNDgzLjc1Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTgxOSIgeT0iLTQ2Ni40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfTG9jYWxGaW5hbEZ1bmN0aW9uIGltcG9ydCAvR2FtZS9Dcml0dGVycy9KZWxseVBsYXRmb3JtL0VORV9KZWxseV9QYXNzaXZlJiM0NTsmZ3Q7RU5FX0plbGx5X1Bhc3NpdmVfQyYjNDU7Jmd0O09uRGVhdGg8L3RleHQ+CjwvZz4KPCEtLSBFeGVjdXRlVWJlcmdyYXBoX0VORV9KZWxseV9QYXNzaXZlX01vdGhlcl9fNjEgLS0+CjxnIGlkPSJub2RlNyIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+RXhlY3V0ZVViZXJncmFwaF9FTkVfSmVsbHlfUGFzc2l2ZV9Nb3RoZXJfXzYxPC90aXRsZT4KPHBvbHlnb24gZmlsbD0iI2VlZWVlZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxOTQ3LjEyLC0zNTQuNSAxOTQ3LjEyLC00MDkuNSAyNTU3LjEyLC00MDkuNSAyNTU3LjEyLC0zNTQuNSAxOTQ3LjEyLC0zNTQuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyMjUyLjEyIiB5PSItMzkyLjIiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkVORV9KZWxseV9QYXNzaXZlX01vdGhlcl9DOjpFeGVjdXRlVWJlcmdyYXBoX0VORV9KZWxseV9QYXNzaXZlX01vdGhlcjo2MTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTk0Ny4xMiwtMzgyIDI1NTcuMTIsLTM4MiIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjE5NTUuMTIiIHk9Ii0zNjQuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfSnVtcCAxMDwvdGV4dD4KPC9nPgo8IS0tIEV4ZWN1dGVVYmVyZ3JhcGhfRU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX181MSYjNDU7Jmd0O0V4ZWN1dGVVYmVyZ3JhcGhfRU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX182MSAtLT4KPGcgaWQ9ImVkZ2U0IiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5FeGVjdXRlVWJlcmdyYXBoX0VORV9KZWxseV9QYXNzaXZlX01vdGhlcl9fNTEmIzQ1OyZndDtFeGVjdXRlVWJlcmdyYXBoX0VORV9KZWxseV9QYXNzaXZlX01vdGhlcl9fNjE8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMjI1Mi4xMiwtNDU1Ljc2QzIyNTIuMTIsLTQ0NS4wMiAyMjUyLjEyLC00MzIuNDkgMjI1Mi4xMiwtNDIwLjg3Ii8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjIyNTUuNjMsLTQyMS4xOCAyMjUyLjEzLC00MTEuMTggMjI0OC42MywtNDIxLjE4IDIyNTUuNjMsLTQyMS4xOCIvPgo8L2c+CjwhLS0gRXhlY3V0ZVViZXJncmFwaF9FTkVfSmVsbHlfUGFzc2l2ZV9Nb3RoZXJfXzYxJiM0NTsmZ3Q7RXhlY3V0ZVViZXJncmFwaF9FTkVfSmVsbHlfUGFzc2l2ZV9Nb3RoZXJfXzEwIC0tPgo8ZyBpZD0iZWRnZTUiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPkV4ZWN1dGVVYmVyZ3JhcGhfRU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX182MSYjNDU7Jmd0O0V4ZWN1dGVVYmVyZ3JhcGhfRU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX18xMDwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik0yMjUyLjEyLC0zNTQuMjRDMjI1Mi4xMiwtMzQ2LjYxIDIyNTIuMTIsLTMzNy45NCAyMjUyLjEyLC0zMjkuMDMiLz4KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMjI1NS42MywtMzI5LjIgMjI1Mi4xMywtMzE5LjIgMjI0OC42MywtMzI5LjIgMjI1NS42MywtMzI5LjIiLz4KPC9nPgo8IS0tIEV4ZWN1dGVVYmVyZ3JhcGhfRU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX182OCAtLT4KPGcgaWQ9Im5vZGU5IiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT5FeGVjdXRlVWJlcmdyYXBoX0VORV9KZWxseV9QYXNzaXZlX01vdGhlcl9fNjg8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSIjZWVlZWVlIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjI1NzUuMTIsLTM1NC41IDI1NzUuMTIsLTQwOS41IDMxODUuMTIsLTQwOS41IDMxODUuMTIsLTM1NC41IDI1NzUuMTIsLTM1NC41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjI4ODAuMTIiIHk9Ii0zOTIuMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX0M6OkV4ZWN1dGVVYmVyZ3JhcGhfRU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyOjY4PC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIyNTc1LjEyLC0zODIgMzE4NS4xMiwtMzgyIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMjU4My4xMiIgeT0iLTM2NC43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5FWF9FbmRPZlNjcmlwdDwvdGV4dD4KPC9nPgo8IS0tIE9uRGVhdGggLS0+CjxnIGlkPSJub2RlMTAiIGNsYXNzPSJub2RlIj4KPHRpdGxlPk9uRGVhdGg8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSIjZmY4ODg4IiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjE2NjAuMTIsLTc0My4yNSAxNjYwLjEyLC03NzkuMjUgMTgwOC4xMiwtNzc5LjI1IDE4MDguMTIsLTc0My4yNSAxNjYwLjEyLC03NDMuMjUiLz4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxNjY4LjEyIiB5PSItNzU3Ljk1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5GdW5jdGlvbiBPbkRlYXRoPC90ZXh0Pgo8L2c+CjwhLS0gT25EZWF0aF9fMCAtLT4KPGcgaWQ9Im5vZGUxMSIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+T25EZWF0aF9fMDwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IiNlZWVlZWUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTMyMS44OCwtNTU4IDEzMjEuODgsLTYzMi41IDIxNDYuMzgsLTYzMi41IDIxNDYuMzgsLTU1OCAxMzIxLjg4LC01NTgiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTczNC4xMiIgeT0iLTYxNS4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5FTkVfSmVsbHlfUGFzc2l2ZV9Nb3RoZXJfQzo6T25EZWF0aDowPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxMzIxLjg4LC02MDUgMjE0Ni4zOCwtNjA1Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTMyOS44OCIgeT0iLTU4Ny43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5FWF9Mb2NhbEZpbmFsRnVuY3Rpb24gZXhwb3J0IEVORV9KZWxseV9QYXNzaXZlX01vdGhlcl9DJiM0NTsmZ3Q7RXhlY3V0ZVViZXJncmFwaF9FTkVfSmVsbHlfUGFzc2l2ZV9Nb3RoZXI8L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTMyOS44OCIgeT0iLTU2OC4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7CoMKgRVhfSW50Q29uc3QgNTE8L3RleHQ+CjwvZz4KPCEtLSBPbkRlYXRoJiM0NTsmZ3Q7T25EZWF0aF9fMCAtLT4KPGcgaWQ9ImVkZ2U2IiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5PbkRlYXRoJiM0NTsmZ3Q7T25EZWF0aF9fMDwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik0xNzM0LjEyLC03NDMuMDFDMTczNC4xMiwtNzE5Ljc2IDE3MzQuMTIsLTY3Ny40NSAxNzM0LjEyLC02NDQuMjEiLz4KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTczNy42MywtNjQ0LjM5IDE3MzQuMTMsLTYzNC4zOSAxNzMwLjYzLC02NDQuMzkgMTczNy42MywtNjQ0LjM5Ii8+CjwvZz4KPCEtLSBPbkRlYXRoX18wJiM0NTsmZ3Q7RXhlY3V0ZVViZXJncmFwaF9FTkVfSmVsbHlfUGFzc2l2ZV9Nb3RoZXJfXzUxIC0tPgo8ZyBpZD0iZWRnZTciIGNsYXNzPSJlZGdlIj4KPHRpdGxlPk9uRGVhdGhfXzA6ZSYjNDU7Jmd0O0V4ZWN1dGVVYmVyZ3JhcGhfRU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX181MTwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0icmVkIiBkPSJNMjE0Ny4xMiwtNTk1LjI1QzIxODguNjgsLTU5NS4yNSAyMjE4Ljc1LC01NTMuNjkgMjIzNS44LC01MjEuNTQiLz4KPHBvbHlnb24gZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZWQiIHBvaW50cz0iMjIzOC44MSwtNTIzLjM1IDIyNDAuMiwtNTEyLjg1IDIyMzIuNTYsLTUyMC4yIDIyMzguODEsLTUyMy4zNSIvPgo8L2c+CjwhLS0gT25EZWF0aF9fMTUgLS0+CjxnIGlkPSJub2RlMTIiIGNsYXNzPSJub2RlIj4KPHRpdGxlPk9uRGVhdGhfXzE1PC90aXRsZT4KPHBvbHlnb24gZmlsbD0iI2VlZWVlZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxNDYzLjM4LC00NDYuNSAxNDYzLjM4LC01MjEgMTc5Mi44OCwtNTIxIDE3OTIuODgsLTQ0Ni41IDE0NjMuMzgsLTQ0Ni41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE2MjguMTIiIHk9Ii01MDMuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RU5FX0plbGx5X1Bhc3NpdmVfTW90aGVyX0M6Ok9uRGVhdGg6MTU8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjE0NjMuMzgsLTQ5My41IDE3OTIuODgsLTQ5My41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTQ3MS4zOCIgeT0iLTQ3Ni4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5FWF9SZXR1cm48L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTQ3MS4zOCIgeT0iLTQ1Ni43IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7CoMKgRVhfTm90aGluZzwvdGV4dD4KPC9nPgo8IS0tIE9uRGVhdGhfXzAmIzQ1OyZndDtPbkRlYXRoX18xNSAtLT4KPGcgaWQ9ImVkZ2U4IiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5PbkRlYXRoX18wJiM0NTsmZ3Q7T25EZWF0aF9fMTU8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMTY5OC44MywtNTU3Ljc5QzE2OTAuMDcsLTU0OC43NCAxNjgwLjU5LC01MzguOTQgMTY3MS40OSwtNTI5LjU1Ii8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjE2NzQuMTUsLTUyNy4yNiAxNjY0LjY4LC01MjIuNTEgMTY2OS4xMiwtNTMyLjEzIDE2NzQuMTUsLTUyNy4yNiIvPgo8L2c+CjwhLS0gT25EZWF0aF9fMTcgLS0+CjxnIGlkPSJub2RlMTMiIGNsYXNzPSJub2RlIj4KPHRpdGxlPk9uRGVhdGhfXzE3PC90aXRsZT4KPHBvbHlnb24gZmlsbD0iI2VlZWVlZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIyNTc1LjM4LC0yMzMuMjUgMjU3NS4zOCwtMjg4LjI1IDI5MDQuODgsLTI4OC4yNSAyOTA0Ljg4LC0yMzMuMjUgMjU3NS4zOCwtMjMzLjI1Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjI3NDAuMTIiIHk9Ii0yNzAuOTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkVORV9KZWxseV9QYXNzaXZlX01vdGhlcl9DOjpPbkRlYXRoOjE3PC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIyNTc1LjM4LC0yNjAuNzUgMjkwNC44OCwtMjYwLjc1Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMjU4My4zOCIgeT0iLTI0My40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfRW5kT2ZTY3JpcHQ8L3RleHQ+CjwvZz4KPC9nPgo8L3N2Zz4K"), m => m.codePointAt(0)));
      container.innerHTML = data.substring(data.indexOf("<svg"));
      const map = container.children[0];
      minimap.src = URL.createObjectURL(new Blob([data], {'type':'image/svg+xml'}));

      function setScale(s) {
        map.style.scale = s;
        map.style.transformOrigin = '0 0';
        const bounds = map.getBoundingClientRect();
        container.style.width = bounds.width + 'px';
        container.style.height = bounds.height + 'px';
        update();
      }

      function zoom(amount, pointX, pointY) {
        const currentScale = +map.style.scale;
        const newScale = currentScale * amount;

        const currentScrollX = window.scrollX;
        const currentScrollY = window.scrollY;

        map.style.scale = newScale;
        const bounds = map.getBoundingClientRect();
        container.style.width = bounds.width + 'px';
        container.style.height = bounds.height + 'px';

        window.scrollTo(pointX * amount - (pointX - currentScrollX), pointY * amount - (pointY - currentScrollY));
        update();
      }
      function scroll(dx, dy) {
        window.scrollBy(dx, dy);
        update();
      }
      function handleMove(e) {
        if (!drag) return;
        if (drag === minimapContainer) {
          const bounds = minimap.getBoundingClientRect();

          scroll(
            document.documentElement.scrollWidth * e.movementX / bounds.width,
            document.documentElement.scrollHeight * e.movementY / bounds.height
          );
        } else {
          scroll(-e.movementX, -e.movementY);
        }
        e.preventDefault();
      }

      let debounceTimeout = null;
      function update() {
        minimapView.style.top = document.documentElement.scrollTop / document.documentElement.scrollHeight * 100 + '%';
        minimapView.style.left = document.documentElement.scrollLeft / document.documentElement.scrollWidth * 100 + '%';
        minimapView.style.width = document.documentElement.clientWidth / document.documentElement.scrollWidth * 100 + '%';
        minimapView.style.height = document.documentElement.clientHeight / document.documentElement.scrollHeight * 100 + '%';
      }

      let drag = false;

      function init() {
        setScale(1);
        const bounds = map.getBoundingClientRect();
        const scaleW = document.documentElement.clientWidth / bounds.width;
        const scaleH = document.documentElement.clientHeight / bounds.height;
        const maxAspectRatio = 0.2;
        const scale = Math.min(Math.max(maxAspectRatio, scaleW / scaleH) * scaleH, Math.max(maxAspectRatio, scaleH / scaleW) * scaleW);
        setScale(Math.min(scale, 1));
      }

      window.addEventListener('wheel', e => {
        e.preventDefault();
        zoom(e.deltaY > 0 ? (1 / 1.1) : 1.1, e.pageX, e.pageY);
      }, {passive: false});

      window.addEventListener('mousedown', e => {
        if (e.target && e.target.tagName === 'text') return;
        if (!(e.buttons & 1)) return;
        if (drag) return;
        drag = e.target || true;
      }, {passive: true});

      window.addEventListener('mouseup', e => {
        if (e.buttons & 1) return;
        drag = false;
      }, {passive: true});

      window.addEventListener('mousemove', e => {
        handleMove(e);
      }, {passive: false});

      window.addEventListener('scroll', () => {
        update();
      }, {passive: true});

      minimapContainer.addEventListener('mousedown', e => {
        e.preventDefault();
      }, {passive: false});

      window.addEventListener('hashchange', () => {
        load();
      }, {passive: true});

      init();
    </script>
  </body>
</html>

